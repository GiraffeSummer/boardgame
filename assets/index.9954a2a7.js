var Wt=Object.defineProperty,Xt=Object.defineProperties;var Zt=Object.getOwnPropertyDescriptors;var ft=Object.getOwnPropertySymbols;var xt=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable;var dt=(t,e,n)=>e in t?Wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ie=(t,e)=>{for(var n in e||(e={}))xt.call(e,n)&&dt(t,n,e[n]);if(ft)for(var n of ft(e))en.call(e,n)&&dt(t,n,e[n]);return t},Re=(t,e)=>Xt(t,Zt(e));import{w as le,g as F,S as re,i as ie,s as oe,e as p,t as P,a as L,b as k,c as v,d as f,f as j,h as Ue,j as He,k as Rt,l as qe,m as Gt,n as g,o as S,p as de,q as Y,r as _e,u as x,v as Z,x as H,y as tn,z as M,A as Ut,B as nn,C as Me,D as ln,E as rn,F as on,G as _t,H as sn,I as an,J as un,K as he,L as cn,M as ae,N as ue,O as ce,P as fn,Q as dn,R as _n,T as mt,U as Ht,V as pt}from"./vendor.a9763176.js";const mn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};mn();function ht(t,e,n){const l=t.slice();return l[1]=e[n],l}function bt(t){let e,n,l=t[1].message+"",r,i,o,s,a,u;return{c(){e=p("mark"),n=p("p"),r=P(l),i=L(),k(e,"class",o="inline-block alert "+t[1].color+" svelte-rlhbd2")},m(c,m){v(c,e,m),f(e,n),f(n,r),f(e,i),u=!0},p(c,m){(!u||m&1)&&l!==(l=c[1].message+"")&&j(r,l),(!u||m&1&&o!==(o="inline-block alert "+c[1].color+" svelte-rlhbd2"))&&k(e,"class",o)},i(c){u||(Ue(()=>{a&&a.end(1),s=He(e,Rt,{}),s.start()}),u=!0)},o(c){s&&s.invalidate(),a=qe(e,Gt,{}),u=!1},d(c){c&&g(e),c&&a&&a.end()}}}function pn(t){let e,n,l=t[0],r=[];for(let o=0;o<l.length;o+=1)r[o]=bt(ht(t,l,o));const i=o=>Y(r[o],1,1,()=>{r[o]=null});return{c(){e=p("div");for(let o=0;o<r.length;o+=1)r[o].c()},m(o,s){v(o,e,s);for(let a=0;a<r.length;a+=1)r[a].m(e,null);n=!0},p(o,[s]){if(s&1){l=o[0];let a;for(a=0;a<l.length;a+=1){const u=ht(o,l,a);r[a]?(r[a].p(u,s),S(r[a],1)):(r[a]=bt(u),r[a].c(),S(r[a],1),r[a].m(e,null))}for(de(),a=l.length;a<r.length;a+=1)i(a);_e()}},i(o){if(!n){for(let s=0;s<l.length;s+=1)S(r[s]);n=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)Y(r[s]);n=!1},d(o){o&&g(e),x(r,o)}}}let je=le([]);function B(t,e="primary",n=1200){let l={message:t,color:e,duration:n};je.set([...F(je),l])}function qt(){je.set([])}function hn(t,e,n){let l;return Z(t,je,r=>n(0,l=r)),[l]}class bn extends re{constructor(e){super();ie(this,e,hn,pn,oe,{})}}const vn="modulepreload",vt={},gn="./",yn=function(e,n){return!n||n.length===0?e():Promise.all(n.map(l=>{if(l=`${gn}${l}`,l in vt)return;vt[l]=!0;const r=l.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${i}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":vn,r||(o.as="script",o.crossOrigin=""),o.href=l,document.head.appendChild(o),r)return new Promise((s,a)=>{o.addEventListener("load",s),o.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e())};function gt(t,e,n){const l=t.slice();return l[1]=e[n],l}function yt(t){let e,n,l,r,i,o=t[0].title+"",s,a,u,c=t[0].message+"",m,h,d,_,w,C,T,b=t[0].buttons,y=[];for(let $=0;$<b.length;$+=1)y[$]=kt(gt(t,b,$));return{c(){e=p("div"),l=L(),r=p("div"),i=p("h3"),s=P(o),a=L(),u=p("p"),m=P(c),h=L(),d=p("div");for(let $=0;$<y.length;$+=1)y[$].c();k(e,"class","background svelte-1naglno"),k(i,"class","section"),k(u,"class","section"),k(d,"class","section"),k(r,"class","card modal-content svelte-1naglno")},m($,I){v($,e,I),v($,l,I),v($,r,I),f(r,i),f(i,s),f(r,a),f(r,u),f(u,m),f(r,h),f(r,d);for(let N=0;N<y.length;N+=1)y[N].m(d,null);w=!0,C||(T=H(e,"click",$n),C=!0)},p($,I){if((!w||I&1)&&o!==(o=$[0].title+"")&&j(s,o),(!w||I&1)&&c!==(c=$[0].message+"")&&j(m,c),I&1){b=$[0].buttons;let N;for(N=0;N<b.length;N+=1){const R=gt($,b,N);y[N]?y[N].p(R,I):(y[N]=kt(R),y[N].c(),y[N].m(d,null))}for(;N<y.length;N+=1)y[N].d(1);y.length=b.length}},i($){w||(n&&n.end(1),_||Ue(()=>{_=He(r,Rt,{}),_.start()}),w=!0)},o($){n=qe(e,Gt,{}),w=!1},d($){$&&g(e),$&&n&&n.end(),$&&g(l),$&&g(r),x(y,$),C=!1,T()}}}function kt(t){let e,n=t[1].text+"",l,r,i,o;return{c(){e=p("button"),l=P(n),k(e,"class",r="button "+t[1].style+" svelte-1naglno")},m(s,a){v(s,e,a),f(e,l),i||(o=H(e,"click",function(){tn(t[1].pressed)&&t[1].pressed.apply(this,arguments)}),i=!0)},p(s,a){t=s,a&1&&n!==(n=t[1].text+"")&&j(l,n),a&1&&r!==(r="button "+t[1].style+" svelte-1naglno")&&k(e,"class",r)},d(s){s&&g(e),i=!1,o()}}}function kn(t){let e,n,l=t[0].show&&yt(t);return{c(){e=p("div"),l&&l.c(),k(e,"class","modal")},m(r,i){v(r,e,i),l&&l.m(e,null),n=!0},p(r,[i]){r[0].show?l?(l.p(r,i),i&1&&S(l,1)):(l=yt(r),l.c(),S(l,1),l.m(e,null)):l&&(de(),Y(l,1,1,()=>{l=null}),_e())},i(r){n||(S(l),n=!0)},o(r){Y(l),n=!1},d(r){r&&g(e),l&&l.d()}}}let J=le({show:!1}),Ve;function Vt(t,e="Alert!"){J.set({show:!1,title:e,message:t,canCancel:!0,buttons:[]});const n={show(){return J.update(l=>(l.show=!0,l)),F(J)},canCancel(l=!0){J.update(r=>(r.canCancel=l,r))},hide(){J.update(l=>(l.show=!1,l)),this._oncloseListeners.forEach(l=>l())},addButton(l,r=()=>{},i="primary",o=!0){return J.update(s=>(s.buttons.push(wn(l,r,i,o)),s)),this},_oncloseListeners:[],onClose(l){return this._oncloseListeners.push(l),this}};return Ve=n,n}function wn(t,e=()=>{},n="primary",l=!0){return{text:t,style:n,closing:l,pressed:()=>(l&&Ve.hide(),e())}}function $n(){F(J).canCancel&&Ve.hide()}function Tn(t,e,n){let l;return Z(t,J,r=>n(0,l=r)),[l]}class Cn extends re{constructor(e){super();ie(this,e,Tn,kn,oe,{})}}var zt={rainbow:";animation: rainbow 5s linear;animation-iteration-count: infinite;",background_image:(t,e="cover")=>`;background-repeat: no-repeat;background-size: ${e};background-image:url("${t}")`};async function Pn(t,e){console.log("map data from "+t.generator);const{generate:n}=await yn(()=>import(t.generator),[]);return n(e,{CreateTile:D,defaultStay:me,createTurn:z,colors:X,GetNextPlayer:Kt,GetRandomPlayer:Jt,CreateAlert:B,Effects:zt,CreatePopup:Vt,gameManager:q,mapInfo:t},Ln)}function An(t){return Math.floor(Math.random()*t)}const Ln={atm:()=>D("ATM","background-color:purple;color:white;").makeInteractable(function(t,e){if(t.hasInteracted<1){const n=An(4)+2;B(`You stole ${n}!`,"tertiary"),t.hasInteracted++,t.setupClearInteraction(e),e.coins+=n,e.update()}else B("You already stole from here!","secondary")},"Steal"),gross:()=>D("gross","background-color:maroon;color:white;").addStay(function(t){t.color!="#663300"?(B("Ew you're gross!","secondary",1200),t.color="#663300",this.stay=me,this.style=""):B("You're already gross!","primary",1e3)}),carwash:()=>D("carwash","background-color:green;color:white;").makeInteractable(function(t,e){e.color!=X[e.index]?(B("You got nice and clean!","secondary",1200),e.color=X[e.index],t.update(),this.stay=me,this.style=""):B("You don't need to be cleaned!","primary",1e3)},"Clean"),mimic:()=>D("mimic","background-color:green;color:white;"+zt.rainbow).addStay(function(t){if(t.color==X[t.index]){let e=Jt();B(`You mimiced the color of ${e.name}!`,"primary",1200),t.color=e.color,this.stay=me,this.style=""}else B("You're already disguised!","primary",1e3)}),backwards:()=>D("backwards","background-color:maroon;color:white;").addStay(function(t){t.currentTurn.immune||(B("You have to move backwards next turn","secondary"),t.turnQueue[0].stepAmount=-1,t.turnQueue[0].immune=!0)}),modifier:(t=2)=>{let e=t>0?"green":"maroon";return D("modifier "+t,`background-color:${e};color:white;`).addStay(function(n){n.currentTurn.immune&&t<0||(t>0?B("You get to move extra next turn","tertiary"):B("You have to move backwards next turn","secondary"),n.turnQueue[0].stepAmount=t,n.turnQueue[0].immune=t<0)})},setback:(t=2)=>D("setback "+t,"background-color:maroon;color:white;").addStay(function(e){e.currentTurn.immune||(B(`You got sent back ${t} tiles!`,"secondary",1200),e.move(-t),e.turnQueue[0].immune=!0,e.currentTurn.immune=!0)}),bigdice:(t=8)=>D("big Dice","background-color:green;color:white;").addStay(function(e){B(`You get to use a d${t} next turn!`,"tertiary"),e.turnQueue[0].dice.sides=t}),addaction:()=>D("extra action","background-color:green;color:white;").addStay(function(t){B("You get an extra action!","tertiary"),t.currentTurn.actions.max+=1,t.currentTurn.actions.left+=1}),moreaction:()=>D("extra next action","background-color:green;color:white;").addStay(function(t){B("You get an extra action next turn!","tertiary");let e=z();e.actions={left:t.turnQueue[0].actions.left+1,max:t.turnQueue[0].actions.max+1},t.turnQueue[0]=e})},fe=le(!1),wt=le(""),be=le([]);function In(t,e=0){console.log(`${t.name} passed the end by ${e}`),B(`${t.name} passed the end by ${e}`),t.round+=1,t.tile=e,F(be)[t.tile].addPlayer(t).stay(t),q.dispatch("lapped",t)}function Mn(t){let e=[];for(let n=0;n<t;n++)e.push(D("tile "+n));return e}const pe=le([]),W=le(void 0);let G={ready:!1,turn:0,playerCount:0,currentPlayerIndex:0,actions:1};const q=Re(Ie({},ze()),{end:function(){qt(),fe.set(!1),F(W).endTurn(),pe.set([]),be.set([]),W.set(void 0),G={ready:!1,turn:0,playerCount:0,currentPlayerIndex:0,actions:1},this.events=[]}});function jn(t){let e=F(be);pe.update(l=>[...l,Ie({name:t,tile:0,index:l.length,turn:0,color:X[l.length],round:0,coins:0,rollHistory:[],getTile:function(){return e[this.tile]},move:function(r){r=r*this.currentTurn.stepAmount;const i=e[this.tile];if(i.removePlayer(this),this.tile+r>=e.length)In(this,this.tile+r-e.length);else{this.tile+=r,this.tile<0&&(this.tile=0);const o=e[this.tile];o.addPlayer(this),console.log(`moving from ${i.name} to ${o.name}`),this.update(),o.stay(this)}this.update()},currentTurn:z(),turnQueue:[z(),z(),z(),z(),z()],endTurn:function(){if(F(fe)==!1)return $t();this.currentTurn=this.turnQueue.shift(),this.turnQueue=[...this.turnQueue,z()],this.dispatch("endturn"),qt(),B(`player ${this.name} ended their turn ${this.turn}`,"tertiary"),$t()},_v:0,update:function(){this._v++,this.dispatch("update")}},ze())]),G.playerCount++;let n=F(pe);F(W)==null&&(W.set(n[0]),W.update(l=>(l.turn=1,l))),e[0].addPlayer(n[n.length-1])}function z(){let t={immune:!1,rollValue:{},stepAmount:1,dice:{sides:6,amount:1},actions:{max:G.actions,left:0},isNormal:function(){let e=this.immune==!1&&this.stepAmount==1&&this.dice.sides==6&&this.dice.amount==1&&this.actions.max==G.actions,n={};return this.immune!=!1&&(n.immune=this.immune),this.stepAmount!=1&&(n.stepAmount=this.stepAmount),this.actions.max!=G.actions&&(n.actions=this.actions.max),(this.dice.sides!=6||this.dice.amount!=1)&&(n.dice={}),this.dice.sides!=6&&(n.dice.sides=this.dice.sides),this.dice.amount!=1&&(n.dice.amount=this.dice.amount),{normal:e,modifiers:n}}};return t.actions.left=t.actions.max,t.hasActionsLeft=function(){return!this.actions.left>0},t.useAction=function(e=1){this.actions.left>=e?this.actions.left-=e:B("No more actions","secondary")},t}function me(t){console.log(`player ${t.name} stopped at ${this.name}`),B(`player ${t.name} moved to ${this.name}`)}function D(t="Tile",e=""){return Re(Ie({players:[],name:t,stay:me,style:e,interactable:!1,interact:function(l){this.dispatch("interact",l)},hasInteracted:0,removePlayer:function(l){this.players=this.players.filter(r=>r!=l),this.update()},addPlayer:function(l){return this.players.push(l),this.players=this.players,this.update(),this}},ze()),{_v:0,update:function(){this._v++,this.dispatch("update")},makeInteractable:function(l,r="Nothing"){return this.interactable=!0,this.interactableType=r,this.hasInteracted=0,this.addListener("interact",l),this},addStay:function(l){return this.stay=l,this},setupClearInteraction:function(l){l.addListener("endturn",r=>{this.players.length>0?this.players[this.players.length-1].addListener("endturn",o=>{this.hasInteracted=0},!0):this.hasInteracted=0},!0)}})}function ze(){return{events:{},addListener:function(t,e,n=!1){const l={run:e,single:n};t in this.events?this.events[t].push(l):this.events[t]=[l]},dispatch:function(t){if(t in this.events){let e=Array.prototype.slice.call(arguments);e.length>1&&e.shift(),this.events[t].forEach(n=>{e.length<=0?n.run(this):n.run(this,...e)}),this.events[t].filter(n=>!n.single)}}}}function Kt(){let t=G,e=t.currentPlayerIndex+1==t.playerCount?0:t.currentPlayerIndex+1;return F(pe)[e]}function Jt(t=!1){const e=F(pe);if(t){const n=Tt(e.length);return e[n]}else{const n=G.currentPlayerIndex,l=e.filter(i=>i.index!=n),r=Tt(l.length);return l[r]}}function $t(){if(F(fe)==!1)return;let t=G,e=Kt();t.currentPlayerIndex=e.index,e.turn+=1,W.set(e),q.dispatch("startturn",e)}const X=["blue","red","gold","#50C878","#6600FF","#FF6A6A"];async function Ne(){var t;return"inBrowser"in q||(q.inBrowser=!await((t=window.api)==null?void 0:t.isElectron())||!1),q.inBrowser}async function Nn(t,e=2){console.log("loading game");const n=await Ne(),l=`/maps/${t}/`,r=n?"":await window.api.GetContentFolder(),i=await(await fetch(r+l+"map.json")).json();i.generator=r+l+i.generator;const o=Mn(i.tiles);let s=await Pn(i,o);be.set(s),G.actions=i.actions,e=e!=null&&e>X.length?X.length:e;for(let a=0;a<e;a++)jn("player "+(a+1));B("Game Started!","tertiary",1e3),G.ready=!0,q.dispatch("ready")}function Tt(t){return Math.floor(Math.random()*t)}function Sn(t){let e,n,l,r,i,o,s,a,u,c,m,h,d;return{c(){e=p("ul"),n=p("li"),l=p("button"),r=p("span"),i=P(" Home"),s=L(),a=p("li"),u=p("button"),c=p("span"),m=P(" Reload maps"),k(r,"class","icon-home inverse"),l.disabled=o=!t[0],k(l,"class","svelte-1bwnjup"),k(n,"class","svelte-1bwnjup"),k(c,"class","icon-search inverse"),u.hidden=t[0],k(u,"class","svelte-1bwnjup"),k(a,"class","svelte-1bwnjup"),k(e,"class","svelte-1bwnjup")},m(_,w){v(_,e,w),f(e,n),f(n,l),f(l,r),f(l,i),f(e,s),f(e,a),f(a,u),f(u,c),f(u,m),h||(d=[H(l,"click",t[3]),H(u,"click",t[4])],h=!0)},p(_,[w]){w&1&&o!==(o=!_[0])&&(l.disabled=o),w&1&&(u.hidden=_[0])},i:M,o:M,d(_){_&&g(e),h=!1,Ut(d)}}}function En(t,e,n){let l;Z(t,fe,a=>n(0,l=a));const r=nn();function i(a=!0){a?Vt(`Going back home will end the game
are you sure you want to continue?`).addButton("Cancel",()=>{},"tertiary").addButton("Yes end game",()=>{q.end()},"secondary").show():q.end()}return[l,r,i,()=>{i(!0)},()=>{r("reloadMaps",{})}]}class Bn extends re{constructor(e){super();ie(this,e,En,Sn,oe,{})}}var Ge=["\u2B24","\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246A","\u246B","\u246C","\u246D","\u246E","\u246F","\u2470","\u2471","\u2472","\u2473","\u3251","\u3252","\u3253","\u3254","\u3255","\u3256","\u3257","\u3258","\u3259","\u325A","\u325B","\u325C","\u325D","\u325E","\u325F","\u32B1","\u32B2","\u32B3","\u32B4","\u32B5","\u32B6","\u32B7","\u32B8","\u32B9","\u32BA","\u32BB","\u32BC","\u32BD","\u32BE","\u32BF"];function Ct(t,e,n){const l=t.slice();return l[1]=e[n],l}function Pt(t,e){let n,l,r,i,o,s,a=M,u;return{key:t,first:null,c(){n=p("span"),l=p("span"),l.textContent=`${Ge[0]}`,k(l,"class","svelte-oyrjik"),k(n,"aria-label",r=e[1].name),k(n,"class","player tooltip svelte-oyrjik"),Me(n,"color",e[1].color),this.first=n},m(c,m){v(c,n,m),f(n,l),u=!0},p(c,m){e=c,(!u||m&1&&r!==(r=e[1].name))&&k(n,"aria-label",r),(!u||m&1)&&Me(n,"color",e[1].color)},r(){s=n.getBoundingClientRect()},f(){ln(n),a(),rn(n,s)},a(){a(),a=on(n,s,an,{})},i(c){u||(Ue(()=>{o&&o.end(1),i=He(n,_t,{x:-50}),i.start()}),u=!0)},o(c){i&&i.invalidate(),o=qe(n,_t,{x:50}),u=!1},d(c){c&&g(n),c&&o&&o.end()}}}function Yn(t){let e,n,l=t[0].name+"",r,i,o,s=[],a=new Map,u,c,m=t[0].players;const h=d=>d[1].name;for(let d=0;d<m.length;d+=1){let _=Ct(t,m,d),w=h(_);a.set(w,s[d]=Pt(w,_))}return{c(){e=p("div"),n=p("b"),r=P(l),i=L(),o=p("div");for(let d=0;d<s.length;d+=1)s[d].c();k(o,"class","row"),k(e,"class","tile card svelte-oyrjik"),k(e,"style",u=t[0].style)},m(d,_){v(d,e,_),f(e,n),f(n,r),f(e,i),f(e,o);for(let w=0;w<s.length;w+=1)s[w].m(o,null);c=!0},p(d,[_]){if((!c||_&1)&&l!==(l=d[0].name+"")&&j(r,l),_&1){m=d[0].players,de();for(let w=0;w<s.length;w+=1)s[w].r();s=sn(s,_,h,1,d,m,a,o,un,Pt,null,Ct);for(let w=0;w<s.length;w+=1)s[w].a();_e()}(!c||_&1&&u!==(u=d[0].style))&&k(e,"style",u)},i(d){if(!c){for(let _=0;_<m.length;_+=1)S(s[_]);c=!0}},o(d){for(let _=0;_<s.length;_+=1)Y(s[_]);c=!1},d(d){d&&g(e);for(let _=0;_<s.length;_+=1)s[_].d()}}}function On(t,e,n){let{tile:l}=e;return l.addListener("update",r=>{n(0,l=r)}),t.$$set=r=>{"tile"in r&&n(0,l=r.tile)},[l]}class Qn extends re{constructor(e){super();ie(this,e,On,Yn,oe,{tile:0})}}function At(t,e,n){const l=t.slice();return l[11]=e[n],l}function Lt(t,e,n){const l=t.slice();return l[14]=e[n][0],l[15]=e[n][1],l}function It(t,e,n){const l=t.slice();return l[18]=e[n][0],l[19]=e[n][1],l}function Dn(t){let e,n,l,r,i=Object.entries(t[3].modifiers),o=[];for(let s=0;s<i.length;s+=1)o[s]=jt(Lt(t,i,s));return{c(){e=P("Modifiers:"),n=p("br"),l=L();for(let s=0;s<o.length;s+=1)o[s].c();r=he()},m(s,a){v(s,e,a),v(s,n,a),v(s,l,a);for(let u=0;u<o.length;u+=1)o[u].m(s,a);v(s,r,a)},p(s,a){if(a&8){i=Object.entries(s[3].modifiers);let u;for(u=0;u<i.length;u+=1){const c=Lt(s,i,u);o[u]?o[u].p(c,a):(o[u]=jt(c),o[u].c(),o[u].m(r.parentNode,r))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}},d(s){s&&g(e),s&&g(n),s&&g(l),x(o,s),s&&g(r)}}}function Fn(t){let e;return{c(){e=P("Normal")},m(n,l){v(n,e,l)},p:M,d(n){n&&g(e)}}}function Rn(t){let e,n=t[14][0].toUpperCase()+t[14].slice(1)+"",l,r,i=t[15]+"",o,s,a;return{c(){e=p("b"),l=P(n),r=P(": "),o=P(i),s=L(),a=p("br")},m(u,c){v(u,e,c),f(e,l),v(u,r,c),v(u,o,c),v(u,s,c),v(u,a,c)},p(u,c){c&8&&n!==(n=u[14][0].toUpperCase()+u[14].slice(1)+"")&&j(l,n),c&8&&i!==(i=u[15]+"")&&j(o,i)},d(u){u&&g(e),u&&g(r),u&&g(o),u&&g(s),u&&g(a)}}}function Gn(t){let e,n=t[14][0].toUpperCase()+t[14].slice(1)+"",l,r,i,o,s,a=Object.entries(t[15]),u=[];for(let c=0;c<a.length;c+=1)u[c]=Mt(It(t,a,c));return{c(){e=p("b"),l=P(n),r=P(":"),i=p("br"),o=L();for(let c=0;c<u.length;c+=1)u[c].c();s=he()},m(c,m){v(c,e,m),f(e,l),f(e,r),v(c,i,m),v(c,o,m);for(let h=0;h<u.length;h+=1)u[h].m(c,m);v(c,s,m)},p(c,m){if(m&8&&n!==(n=c[14][0].toUpperCase()+c[14].slice(1)+"")&&j(l,n),m&8){a=Object.entries(c[15]);let h;for(h=0;h<a.length;h+=1){const d=It(c,a,h);u[h]?u[h].p(d,m):(u[h]=Mt(d),u[h].c(),u[h].m(s.parentNode,s))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}},d(c){c&&g(e),c&&g(i),c&&g(o),x(u,c),c&&g(s)}}}function Mt(t){let e,n=t[18][0].toUpperCase()+t[18].slice(1)+"",l,r,i=t[19]+"",o;return{c(){e=p("b"),l=P(n),r=P(": "),o=P(i)},m(s,a){v(s,e,a),f(e,l),f(e,r),f(e,o)},p(s,a){a&8&&n!==(n=s[18][0].toUpperCase()+s[18].slice(1)+"")&&j(l,n),a&8&&i!==(i=s[19]+"")&&j(o,i)},d(s){s&&g(e)}}}function jt(t){let e;function n(i,o){return typeof i[15]=="object"?Gn:Rn}let l=n(t),r=l(t);return{c(){r.c(),e=he()},m(i,o){r.m(i,o),v(i,e,o)},p(i,o){l===(l=n(i))&&r?r.p(i,o):(r.d(1),r=l(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){r.d(i),i&&g(e)}}}function Nt(t){let e,n=(t[11]-1<t[4].length?t[4][t[11]-1]:t[11])+"",l;return{c(){e=p("span"),l=P(n),k(e,"class","dice svelte-1uo4w7e")},m(r,i){v(r,e,i),f(e,l)},p(r,i){i&2&&n!==(n=(r[11]-1<r[4].length?r[4][r[11]-1]:r[11])+"")&&j(l,n)},d(r){r&&g(e)}}}function Un(t){let e,n,l,r,i=Ge[t[0].round]+"",o,s,a=t[0].name+"",u,c,m=t[0].currentTurn.immune?"\u{1F6E1}\uFE0F":"",h,d,_,w,C=t[0].currentTurn.dice.sides+"",T,b=t[0].currentTurn.amount>1?"x"+t[0].currentTurn.dice.amount:"",y,$,I,N,R,Ke,ve=t[0].turn+"",Se,Je,ge=t[0].currentTurn.actions.left+"",Ee,We,ye=t[0].currentTurn.actions.max+"",Be,Xe,ke,Ze,we=t[0].coins+"",Ye,xe,V,et,Oe,tt,nt,$e=(t[1].total||0)+"",Qe,lt,K,ee,rt,Te,it,te,Ce=(t[2].interactableType||"Nothing")+"",De,Pe,ot,ne,st,Ae,Fe,at;function ut(A,E){return A[3].normal?Fn:Dn}let Le=ut(t),U=Le(t),se=t[1].rolls,Q=[];for(let A=0;A<se.length;A+=1)Q[A]=Nt(At(t,se,A));return{c(){e=p("div"),n=p("div"),l=p("div"),r=p("h3"),o=P(i),s=L(),u=P(a),c=L(),h=P(m),d=L(),_=p("h6"),w=P("Dice: d"),T=P(C),y=P(b),$=L(),I=p("h6"),U.c(),N=L(),R=p("h6"),Ke=P("Turn: "),Se=P(ve),Je=P(`
        Actions: `),Ee=P(ge),We=P("/"),Be=P(ye),Xe=L(),ke=p("h6"),Ze=P("\u{1FA99}: "),Ye=P(we),xe=L(),V=p("h6"),et=P(`Result:
        `);for(let A=0;A<Q.length;A+=1)Q[A].c();Oe=L(),tt=p("br"),nt=P(`
        total: `),Qe=P($e),lt=L(),K=p("div"),ee=p("button"),rt=P("Roll"),it=L(),te=p("button"),De=P(Ce),ot=L(),ne=p("button"),st=P("End turn"),Me(r,"color",t[0].color),k(l,"class","section"),ee.disabled=Te=t[0].currentTurn.hasActionsLeft(),k(ee,"class","button primary svelte-1uo4w7e"),te.disabled=Pe=!t[2].interactable,k(te,"class","button tertiary svelte-1uo4w7e"),ne.disabled=Ae=!(t[0].currentTurn.actions.left<t[0].currentTurn.actions.max),k(ne,"class","button secondary svelte-1uo4w7e"),k(K,"class","button-group section dark "),k(n,"class","card col-lg-12"),k(e,"class","row")},m(A,E){v(A,e,E),f(e,n),f(n,l),f(l,r),f(r,o),f(r,s),f(r,u),f(r,c),f(r,h),f(l,d),f(l,_),f(_,w),f(_,T),f(_,y),f(l,$),f(l,I),U.m(I,null),f(l,N),f(l,R),f(R,Ke),f(R,Se),f(R,Je),f(R,Ee),f(R,We),f(R,Be),f(l,Xe),f(l,ke),f(ke,Ze),f(ke,Ye),f(l,xe),f(l,V),f(V,et);for(let O=0;O<Q.length;O+=1)Q[O].m(V,null);f(V,Oe),f(V,tt),f(V,nt),f(V,Qe),f(n,lt),f(n,K),f(K,ee),f(ee,rt),f(K,it),f(K,te),f(te,De),f(K,ot),f(K,ne),f(ne,st),Fe||(at=[H(ee,"click",t[6]),H(te,"click",t[7]),H(ne,"click",t[8])],Fe=!0)},p(A,[E]){if(E&1&&i!==(i=Ge[A[0].round]+"")&&j(o,i),E&1&&a!==(a=A[0].name+"")&&j(u,a),E&1&&m!==(m=A[0].currentTurn.immune?"\u{1F6E1}\uFE0F":"")&&j(h,m),E&1&&Me(r,"color",A[0].color),E&1&&C!==(C=A[0].currentTurn.dice.sides+"")&&j(T,C),E&1&&b!==(b=A[0].currentTurn.amount>1?"x"+A[0].currentTurn.dice.amount:"")&&j(y,b),Le===(Le=ut(A))&&U?U.p(A,E):(U.d(1),U=Le(A),U&&(U.c(),U.m(I,null))),E&1&&ve!==(ve=A[0].turn+"")&&j(Se,ve),E&1&&ge!==(ge=A[0].currentTurn.actions.left+"")&&j(Ee,ge),E&1&&ye!==(ye=A[0].currentTurn.actions.max+"")&&j(Be,ye),E&1&&we!==(we=A[0].coins+"")&&j(Ye,we),E&18){se=A[1].rolls;let O;for(O=0;O<se.length;O+=1){const ct=At(A,se,O);Q[O]?Q[O].p(ct,E):(Q[O]=Nt(ct),Q[O].c(),Q[O].m(V,Oe))}for(;O<Q.length;O+=1)Q[O].d(1);Q.length=se.length}E&2&&$e!==($e=(A[1].total||0)+"")&&j(Qe,$e),E&1&&Te!==(Te=A[0].currentTurn.hasActionsLeft())&&(ee.disabled=Te),E&4&&Ce!==(Ce=(A[2].interactableType||"Nothing")+"")&&j(De,Ce),E&4&&Pe!==(Pe=!A[2].interactable)&&(te.disabled=Pe),E&1&&Ae!==(Ae=!(A[0].currentTurn.actions.left<A[0].currentTurn.actions.max))&&(ne.disabled=Ae)},i:M,o:M,d(A){A&&g(e),U.d(),x(Q,A),Fe=!1,Ut(at)}}}function Hn(t,e){return Math.floor(Math.random()*(e-t+1))+t}function qn(t,e,n){let l,r,i;Z(t,W,_=>n(9,i=_));const o=["\u2680","\u2681","\u2682","\u2683","\u2684","\u2685"];let{player:s={}}=e;const a=(_,w)=>{let C=[];for(let T=0;T<_;T++)C.push(u(w));return{amount:_,sides:w,rolls:C,total:C.reduce((T,b)=>T+b,0)}},u=(_=6)=>Hn(1,_);let c={rolls:[]};s.addListener("update",_=>{n(0,s=_)}),i.addListener("endturn",_=>{n(1,c={rolls:[]})});const m=()=>{const _=s.currentTurn.dice;n(1,c=a(_.amount,_.sides)),n(0,s.rollHistory=[c,...s.rollHistory],s),n(0,s.currentTurn.rollValue=c,s),s.currentTurn.useAction(),s.move(c.total)},h=()=>{r.interact(s)},d=()=>{s.endTurn()};return t.$$set=_=>{"player"in _&&n(0,s=_.player)},t.$$.update=()=>{t.$$.dirty&1&&n(3,l=s.currentTurn.isNormal()),t.$$.dirty&1&&n(2,r=s.getTile())},[s,c,r,l,o,a,m,h,d]}class Vn extends re{constructor(e){super();ie(this,e,qn,Un,oe,{player:0})}}function St(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function zn(t){let e,n,l,r,i,o,s,a,u;l=new Vn({props:{player:t[1]}}),o=new bn({});let c=t[2],m=[];for(let d=0;d<c.length;d+=1)m[d]=Et(St(t,c,d));const h=d=>Y(m[d],1,1,()=>{m[d]=null});return{c(){e=p("div"),n=p("div"),ae(l.$$.fragment),r=L(),i=p("div"),ae(o.$$.fragment),s=L(),a=p("div");for(let d=0;d<m.length;d+=1)m[d].c();k(n,"class","col-md"),k(i,"class","col-md"),k(e,"class","row"),k(a,"class","row")},m(d,_){v(d,e,_),f(e,n),ue(l,n,null),f(e,r),f(e,i),ue(o,i,null),v(d,s,_),v(d,a,_);for(let w=0;w<m.length;w+=1)m[w].m(a,null);u=!0},p(d,_){const w={};if(_&2&&(w.player=d[1]),l.$set(w),_&4){c=d[2];let C;for(C=0;C<c.length;C+=1){const T=St(d,c,C);m[C]?(m[C].p(T,_),S(m[C],1)):(m[C]=Et(T),m[C].c(),S(m[C],1),m[C].m(a,null))}for(de(),C=c.length;C<m.length;C+=1)h(C);_e()}},i(d){if(!u){S(l.$$.fragment,d),S(o.$$.fragment,d);for(let _=0;_<c.length;_+=1)S(m[_]);u=!0}},o(d){Y(l.$$.fragment,d),Y(o.$$.fragment,d),m=m.filter(Boolean);for(let _=0;_<m.length;_+=1)Y(m[_]);u=!1},d(d){d&&g(e),ce(l),ce(o),d&&g(s),d&&g(a),x(m,d)}}}function Kn(t){let e;return{c(){e=p("div"),k(e,"class","spinner primary")},m(n,l){v(n,e,l)},p:M,i:M,o:M,d(n){n&&g(e)}}}function Et(t){let e,n;return e=new Qn({props:{tile:t[5]}}),{c(){ae(e.$$.fragment)},m(l,r){ue(e,l,r),n=!0},p(l,r){const i={};r&4&&(i.tile=l[5]),e.$set(i)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){Y(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function Jn(t){let e,n,l,r;const i=[Kn,zn],o=[];function s(a,u){return a[0]?a[1]!=null?1:-1:0}return~(e=s(t))&&(n=o[e]=i[e](t)),{c(){n&&n.c(),l=he()},m(a,u){~e&&o[e].m(a,u),v(a,l,u),r=!0},p(a,[u]){let c=e;e=s(a),e===c?~e&&o[e].p(a,u):(n&&(de(),Y(o[c],1,1,()=>{o[c]=null}),_e()),~e?(n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),S(n,1),n.m(l.parentNode,l)):n=null)},i(a){r||(S(n),r=!0)},o(a){Y(n),r=!1},d(a){~e&&o[e].d(a),a&&g(l)}}}function Wn(t,e,n){let l,r;Z(t,W,a=>n(1,l=a)),Z(t,be,a=>n(2,r=a));let i=!1;q.addListener("ready",()=>{n(0,i=G.ready),console.log("game ready")});let{playerAmount:o=2}=e;cn(()=>{});let{mapname:s="random"}=e;return Nn(s,o),t.$$set=a=>{"playerAmount"in a&&n(3,o=a.playerAmount),"mapname"in a&&n(4,s=a.mapname)},[i,l,r,o,s]}class Xn extends re{constructor(e){super();ie(this,e,Wn,Jn,oe,{playerAmount:3,mapname:4})}}function Bt(t,e,n){const l=t.slice();return l[11]=e[n][0],l[12]=e[n][1],l}function Yt(t,e,n){const l=t.slice();return l[15]=e[n],l}function Zn(t){return{c:M,m:M,p:M,i:M,o:M,d:M}}function xn(t){let e,n,l=!t[18]&&el(t);return{c(){l&&l.c(),e=he()},m(r,i){l&&l.m(r,i),v(r,e,i),n=!0},p(r,i){r[18]||l.p(r,i)},i(r){n||(S(l),n=!0)},o(r){Y(l),n=!1},d(r){l&&l.d(r),r&&g(e)}}}function el(t){let e,n;return e=new Bn({}),e.$on("reloadMaps",t[6]),{c(){ae(e.$$.fragment)},m(l,r){ue(e,l,r),n=!0},p:M,i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){Y(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function tl(t){return{c:M,m:M,p:M,i:M,o:M,d:M}}function nl(t){let e;return{c(){e=p("div"),k(e,"class","spinner primary")},m(n,l){v(n,e,l)},p:M,i:M,o:M,d(n){n&&g(e)}}}function ll(t){let e,n,l,r,i,o,s,a,u,c,m,h,d,_,w,C=t[0],T=[];for(let y=0;y<C.length;y+=1)T[y]=Ot(Yt(t,C,y));let b=t[1][t[2]]!=null&&Qt(t);return{c(){e=p("div"),n=p("div"),l=p("div"),l.innerHTML="<h3>Please select a map:</h3>",r=L(),i=p("div");for(let y=0;y<T.length;y+=1)T[y].c();o=L(),s=p("div"),a=p("button"),a.textContent="Play",u=L(),c=p("div"),m=p("div"),m.innerHTML="<h3>Info</h3>",h=L(),d=p("div"),b&&b.c(),k(l,"class","section"),k(i,"class","section"),k(a,"class","button primary"),k(s,"class","section dark button-group"),k(n,"class","card"),k(m,"class","section"),k(d,"class","section"),k(c,"class","card"),k(e,"class","row")},m(y,$){v(y,e,$),f(e,n),f(n,l),f(n,r),f(n,i);for(let I=0;I<T.length;I+=1)T[I].m(i,null);f(n,o),f(n,s),f(s,a),f(e,u),f(e,c),f(c,m),f(c,h),f(c,d),b&&b.m(d,null),_||(w=H(a,"click",t[5]),_=!0)},p(y,$){if($&5){C=y[0];let I;for(I=0;I<C.length;I+=1){const N=Yt(y,C,I);T[I]?T[I].p(N,$):(T[I]=Ot(N),T[I].c(),T[I].m(i,null))}for(;I<T.length;I+=1)T[I].d(1);T.length=C.length}y[1][y[2]]!=null?b?b.p(y,$):(b=Qt(y),b.c(),b.m(d,null)):b&&(b.d(1),b=null)},i:M,o:M,d(y){y&&g(e),x(T,y),b&&b.d(),_=!1,w()}}}function rl(t){let e,n,l,r;return n=new Xn({props:{mapname:t[2],playerAmount:t[1][t[2]].players}}),{c(){e=p("div"),ae(n.$$.fragment),e.hidden=l=!t[3]},m(i,o){v(i,e,o),ue(n,e,null),r=!0},p(i,o){const s={};o&4&&(s.mapname=i[2]),o&6&&(s.playerAmount=i[1][i[2]].players),n.$set(s),(!r||o&8&&l!==(l=!i[3]))&&(e.hidden=l)},i(i){r||(S(n.$$.fragment,i),r=!0)},o(i){Y(n.$$.fragment,i),r=!1},d(i){i&&g(e),ce(n)}}}function Ot(t){let e,n,l,r,i=t[15]+"",o,s,a,u,c;return{c(){e=p("label"),n=p("input"),r=L(),o=P(i),s=L(),a=p("br"),k(n,"type","radio"),k(n,"name","maps"),n.__value=l=t[15],n.value=n.__value,t[8][0].push(n)},m(m,h){v(m,e,h),f(e,n),n.checked=n.__value===t[2],f(e,r),f(e,o),v(m,s,h),v(m,a,h),u||(c=H(n,"change",t[7]),u=!0)},p(m,h){h&1&&l!==(l=m[15])&&(n.__value=l,n.value=n.__value),h&4&&(n.checked=n.__value===m[2]),h&1&&i!==(i=m[15]+"")&&j(o,i)},d(m){m&&g(e),t[8][0].splice(t[8][0].indexOf(n),1),m&&g(s),m&&g(a),u=!1,c()}}}function Qt(t){let e,n,l,r,i,o,s,a,u,c,m,h=t[1][t[2]].description+"",d,_,w,C=Object.entries(t[1][t[2]]).filter(Ft),T=[];for(let b=0;b<C.length;b+=1)T[b]=Dt(Bt(t,C,b));return{c(){for(let b=0;b<T.length;b+=1)T[b].c();e=L(),n=p("label"),n.innerHTML="<b>Players:</b>",l=L(),r=p("input"),s=p("br"),a=L(),u=p("b"),u.textContent="Description:",c=L(),m=p("p"),d=P(h),k(n,"for","playerAmount"),k(r,"name","playerAmount"),k(r,"type","number"),k(r,"max",i=X.length),k(r,"min",o=2)},m(b,y){for(let $=0;$<T.length;$+=1)T[$].m(b,y);v(b,e,y),v(b,n,y),v(b,l,y),v(b,r,y),pt(r,t[1][t[2]].players),v(b,s,y),v(b,a,y),v(b,u,y),v(b,c,y),v(b,m,y),f(m,d),_||(w=H(r,"input",t[9]),_=!0)},p(b,y){if(y&6){C=Object.entries(b[1][b[2]]).filter(Ft);let $;for($=0;$<C.length;$+=1){const I=Bt(b,C,$);T[$]?T[$].p(I,y):(T[$]=Dt(I),T[$].c(),T[$].m(e.parentNode,e))}for(;$<T.length;$+=1)T[$].d(1);T.length=C.length}y&6&&Ht(r.value)!==b[1][b[2]].players&&pt(r,b[1][b[2]].players),y&6&&h!==(h=b[1][b[2]].description+"")&&j(d,h)},d(b){x(T,b),b&&g(e),b&&g(n),b&&g(l),b&&g(r),b&&g(s),b&&g(a),b&&g(u),b&&g(c),b&&g(m),_=!1,w()}}}function Dt(t){let e,n=t[11][0].toUpperCase()+t[11].slice(1)+"",l,r,i=t[12]+"",o,s,a;return{c(){e=p("b"),l=P(n),r=P(": "),o=P(i),s=L(),a=p("br")},m(u,c){v(u,e,c),f(e,l),v(u,r,c),v(u,o,c),v(u,s,c),v(u,a,c)},p(u,c){c&6&&n!==(n=u[11][0].toUpperCase()+u[11].slice(1)+"")&&j(l,n),c&6&&i!==(i=u[12]+"")&&j(o,i)},d(u){u&&g(e),u&&g(r),u&&g(o),u&&g(s),u&&g(a)}}}function il(t){let e,n,l,r,i,o,s;e=new Cn({});let a={ctx:t,current:null,token:null,hasCatch:!1,pending:tl,then:xn,catch:Zn,value:18,blocks:[,,,]};fn(Ne(),a);const u=[rl,ll,nl],c=[];function m(h,d){return h[3]?0:h[0]!=null?1:2}return i=m(t),o=c[i]=u[i](t),{c(){ae(e.$$.fragment),n=L(),l=p("main"),a.block.c(),r=L(),o.c()},m(h,d){ue(e,h,d),v(h,n,d),v(h,l,d),a.block.m(l,a.anchor=null),a.mount=()=>l,a.anchor=r,f(l,r),c[i].m(l,null),s=!0},p(h,[d]){t=h,dn(a,t,d);let _=i;i=m(t),i===_?c[i].p(t,d):(de(),Y(c[_],1,1,()=>{c[_]=null}),_e(),o=c[i],o?o.p(t,d):(o=c[i]=u[i](t),o.c()),S(o,1),o.m(l,null))},i(h){s||(S(e.$$.fragment,h),S(a.block),S(o),s=!0)},o(h){Y(e.$$.fragment,h);for(let d=0;d<3;d+=1){const _=a.blocks[d];Y(_)}Y(o),s=!1},d(h){ce(e,h),h&&g(n),h&&g(l),a.block.d(),a.token=null,a=null,c[i].d()}}}const Ft=([t,e])=>!["generator","description","players"].includes(t);function ol(t,e,n){let l,r;Z(t,fe,_=>n(3,l=_)),Z(t,wt,_=>n(10,r=_));let i,o={};_n(async()=>{const _=await Ne();console.log(_?"Running in browser":"Running in electron"),await s()});async function s(){const _=await Ne();if(_){const w=await(await fetch(r+"/maps/list.json")).json();n(0,i=w)}else{const w=await window.api.GetContentFolder();mt(wt,r=w,r),n(0,i=await window.api.GetMaps())}i.forEach(async w=>{const C=r+`/maps/${w}/map.json`,T=_?await(await fetch(C)).json():await window.api.LoadPath(C);n(1,o[w]=T,o)})}let a="random";function u(){mt(fe,l=!0,l)}const c=[[]],m=async()=>{await s()};function h(){a=this.__value,n(2,a)}function d(){o[a].players=Ht(this.value),n(1,o)}return[i,o,a,l,s,u,m,h,c,d]}class sl extends re{constructor(e){super();ie(this,e,ol,il,oe,{})}}new sl({target:document.body});
